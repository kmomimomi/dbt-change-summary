# ADR-0003: PoC実装計画

## ステータス
承認済み (2025-01-29)

## コンテキスト
dbt-change-summaryの実現可能性を検証するため、最小限の機能を持つPoCを実装する。PoCでは、コア機能の動作確認と技術的な課題の洗い出しを目的とする。

## 決定
以下の段階的アプローチでPoCを実装する：

### フェーズ1: manifest.json解析器（1-2日）
- dbtのmanifest.jsonファイルを読み込み、解析する
- モデル、シード、ソースの基本情報を抽出
- TypeScriptの型定義を作成

### フェーズ2: 差分検出器（2-3日）
- 2つのmanifest.jsonを比較
- 追加/削除/変更されたモデルを検出
- カラムレベルの変更を検出

### フェーズ3: Markdownレンダラー（1日）
- 差分情報からPRコメント用のMarkdownを生成
- シンプルなテンプレートリテラルで実装

### フェーズ4: GitHub統合（1-2日）
- GitHub APIを使用してPRにコメントを投稿
- 基本的なエラーハンドリング

## 理由
- **段階的検証**: 各コンポーネントを独立して開発・テスト可能
- **早期フィードバック**: 各フェーズで動作確認が可能
- **リスク最小化**: 技術的な問題を早期に発見
- **学習曲線**: Denoとdbtの理解を段階的に深められる

## 実装の優先順位
1. **manifest.json解析** - すべての機能の基盤
2. **差分検出** - コア機能の実装
3. **Markdownレンダリング** - ユーザー向け出力
4. **GitHub統合** - 実用性の検証

## スコープ外（PoC後に実装）
- Excel生成機能
- catalog.jsonの解析
- 複雑なテンプレート機能
- GitHub Actions化
- 包括的なエラーハンドリング

## 成功基準
- manifest.jsonから必要な情報を抽出できる
- 2つのmanifest間の差分を正確に検出できる
- 読みやすいMarkdown形式で差分を表示できる
- GitHubのPRにコメントを投稿できる

## 結果
### 良い結果
- 早期に動作するプロトタイプが得られる
- 各コンポーネントが独立してテスト可能
- 技術的な課題を早期に発見できる

### 悪い結果
- 一部の機能が後回しになる
- リファクタリングが必要になる可能性